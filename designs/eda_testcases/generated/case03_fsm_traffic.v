`include "pyc_reg.v"
`include "pyc_fifo.v"

`include "pyc_byte_mem.v"

`include "pyc_sync_mem.v"
`include "pyc_sync_mem_dp.v"
`include "pyc_async_fifo.v"
`include "pyc_cdc_sync.v"

// Generated by pycc (pyCircuit)
// Module: fsm_traffic

module fsm_traffic (
  input clk,
  input rst,
  input emergency,
  output ns_red,
  output ns_yellow,
  output ns_green,
  output ew_red,
  output ew_yellow,
  output ew_green,
  output [4:0] timer_val
);

wire [2:0] arith_select_31; // op=arith.select
wire [4:0] arith_select_32; // op=arith.select
wire [2:0] arith_select_33; // op=arith.select
wire [4:0] arith_select_34; // op=arith.select
wire [2:0] arith_select_36; // op=arith.select
wire [4:0] arith_select_37; // op=arith.select
wire [2:0] arith_select_39; // op=arith.select
wire [4:0] arith_select_40; // op=arith.select
wire [2:0] arith_select_42; // op=arith.select
wire [2:0] arith_select_43; // op=arith.select
wire [4:0] arith_select_44; // op=arith.select
wire [2:0] arith_select_46; // op=arith.select
wire [2:0] arith_select_48; // op=arith.select
wire emergency__case03_fsm_traffic__L25; // pyc.name="emergency__case03_fsm_traffic__L25"
wire ew_green__case03_fsm_traffic__L78; // pyc.name="ew_green__case03_fsm_traffic__L78"
wire ew_r__case03_fsm_traffic__L82; // pyc.name="ew_r__case03_fsm_traffic__L82"
wire ew_yellow__case03_fsm_traffic__L79; // pyc.name="ew_yellow__case03_fsm_traffic__L79"
wire ns_green__case03_fsm_traffic__L76; // pyc.name="ns_green__case03_fsm_traffic__L76"
wire ns_r__case03_fsm_traffic__L81; // pyc.name="ns_r__case03_fsm_traffic__L81"
wire ns_yellow__case03_fsm_traffic__L77; // pyc.name="ns_yellow__case03_fsm_traffic__L77"
wire [2:0] nxt_st__case03_fsm_traffic__L34; // pyc.name="nxt_st__case03_fsm_traffic__L34"
wire [2:0] nxt_st__case03_fsm_traffic__L37; // pyc.name="nxt_st__case03_fsm_traffic__L37"
wire [2:0] nxt_st__case03_fsm_traffic__L38; // pyc.name="nxt_st__case03_fsm_traffic__L38"
wire [2:0] nxt_st__case03_fsm_traffic__L41; // pyc.name="nxt_st__case03_fsm_traffic__L41"
wire [2:0] nxt_st__case03_fsm_traffic__L45; // pyc.name="nxt_st__case03_fsm_traffic__L45"
wire [2:0] nxt_st__case03_fsm_traffic__L46; // pyc.name="nxt_st__case03_fsm_traffic__L46"
wire [2:0] nxt_st__case03_fsm_traffic__L50; // pyc.name="nxt_st__case03_fsm_traffic__L50"
wire [2:0] nxt_st__case03_fsm_traffic__L51; // pyc.name="nxt_st__case03_fsm_traffic__L51"
wire [2:0] nxt_st__case03_fsm_traffic__L55; // pyc.name="nxt_st__case03_fsm_traffic__L55"
wire [2:0] nxt_st__case03_fsm_traffic__L56; // pyc.name="nxt_st__case03_fsm_traffic__L56"
wire [2:0] nxt_st__case03_fsm_traffic__L59; // pyc.name="nxt_st__case03_fsm_traffic__L59"
wire [2:0] nxt_st__case03_fsm_traffic__L63; // pyc.name="nxt_st__case03_fsm_traffic__L63"
wire [2:0] nxt_st__case03_fsm_traffic__L64; // pyc.name="nxt_st__case03_fsm_traffic__L64"
wire [2:0] nxt_st__case03_fsm_traffic__L68; // pyc.name="nxt_st__case03_fsm_traffic__L68"
wire [2:0] nxt_st__case03_fsm_traffic__L69; // pyc.name="nxt_st__case03_fsm_traffic__L69"
wire [4:0] nxt_tmr__case03_fsm_traffic__L35; // pyc.name="nxt_tmr__case03_fsm_traffic__L35"
wire [4:0] nxt_tmr__case03_fsm_traffic__L37; // pyc.name="nxt_tmr__case03_fsm_traffic__L37"
wire [4:0] nxt_tmr__case03_fsm_traffic__L38; // pyc.name="nxt_tmr__case03_fsm_traffic__L38"
wire [4:0] nxt_tmr__case03_fsm_traffic__L41; // pyc.name="nxt_tmr__case03_fsm_traffic__L41"
wire [4:0] nxt_tmr__case03_fsm_traffic__L45; // pyc.name="nxt_tmr__case03_fsm_traffic__L45"
wire [4:0] nxt_tmr__case03_fsm_traffic__L46; // pyc.name="nxt_tmr__case03_fsm_traffic__L46"
wire [4:0] nxt_tmr__case03_fsm_traffic__L50; // pyc.name="nxt_tmr__case03_fsm_traffic__L50"
wire [4:0] nxt_tmr__case03_fsm_traffic__L51; // pyc.name="nxt_tmr__case03_fsm_traffic__L51"
wire [4:0] nxt_tmr__case03_fsm_traffic__L55; // pyc.name="nxt_tmr__case03_fsm_traffic__L55"
wire [4:0] nxt_tmr__case03_fsm_traffic__L56; // pyc.name="nxt_tmr__case03_fsm_traffic__L56"
wire [4:0] nxt_tmr__case03_fsm_traffic__L59; // pyc.name="nxt_tmr__case03_fsm_traffic__L59"
wire [4:0] nxt_tmr__case03_fsm_traffic__L63; // pyc.name="nxt_tmr__case03_fsm_traffic__L63"
wire [4:0] nxt_tmr__case03_fsm_traffic__L64; // pyc.name="nxt_tmr__case03_fsm_traffic__L64"
wire [4:0] nxt_tmr__case03_fsm_traffic__L68; // pyc.name="nxt_tmr__case03_fsm_traffic__L68"
wire [4:0] nxt_tmr__case03_fsm_traffic__L69; // pyc.name="nxt_tmr__case03_fsm_traffic__L69"
wire pyc_and_71; // op=pyc.and
wire pyc_and_74; // op=pyc.and
wire pyc_comb_12; // op=pyc.comb
wire [2:0] pyc_comb_13; // op=pyc.comb
wire [4:0] pyc_comb_14; // op=pyc.comb
wire [4:0] pyc_comb_15; // op=pyc.comb
wire [2:0] pyc_comb_16; // op=pyc.comb
wire [4:0] pyc_comb_17; // op=pyc.comb
wire [2:0] pyc_comb_18; // op=pyc.comb
wire [2:0] pyc_comb_19; // op=pyc.comb
wire [4:0] pyc_comb_20; // op=pyc.comb
wire [2:0] pyc_comb_21; // op=pyc.comb
wire [2:0] pyc_comb_22; // op=pyc.comb
wire pyc_comb_23; // op=pyc.comb
wire [2:0] pyc_comb_25; // op=pyc.comb
wire [4:0] pyc_comb_61; // op=pyc.comb
wire [2:0] pyc_comb_62; // op=pyc.comb
wire pyc_comb_63; // op=pyc.comb
wire [2:0] pyc_comb_64; // op=pyc.comb
wire [4:0] pyc_comb_65; // op=pyc.comb
wire pyc_comb_75; // op=pyc.comb
wire pyc_comb_76; // op=pyc.comb
wire pyc_comb_77; // op=pyc.comb
wire pyc_comb_78; // op=pyc.comb
wire pyc_comb_79; // op=pyc.comb
wire pyc_comb_80; // op=pyc.comb
wire pyc_constant_1; // op=pyc.constant
wire [2:0] pyc_constant_10; // op=pyc.constant
wire [2:0] pyc_constant_11; // op=pyc.constant
wire [2:0] pyc_constant_2; // op=pyc.constant
wire [4:0] pyc_constant_3; // op=pyc.constant
wire [4:0] pyc_constant_4; // op=pyc.constant
wire [2:0] pyc_constant_5; // op=pyc.constant
wire [4:0] pyc_constant_6; // op=pyc.constant
wire [2:0] pyc_constant_7; // op=pyc.constant
wire [2:0] pyc_constant_8; // op=pyc.constant
wire [4:0] pyc_constant_9; // op=pyc.constant
wire pyc_eq_27; // op=pyc.eq
wire pyc_eq_30; // op=pyc.eq
wire pyc_eq_35; // op=pyc.eq
wire pyc_eq_38; // op=pyc.eq
wire pyc_eq_41; // op=pyc.eq
wire pyc_eq_45; // op=pyc.eq
wire pyc_eq_47; // op=pyc.eq
wire pyc_eq_66; // op=pyc.eq
wire pyc_eq_67; // op=pyc.eq
wire pyc_eq_68; // op=pyc.eq
wire [4:0] pyc_mux_29; // op=pyc.mux
wire [2:0] pyc_mux_49; // op=pyc.mux
wire [4:0] pyc_mux_50; // op=pyc.mux
wire [2:0] pyc_mux_51; // op=pyc.mux
wire [4:0] pyc_mux_52; // op=pyc.mux
wire [2:0] pyc_mux_53; // op=pyc.mux
wire [4:0] pyc_mux_54; // op=pyc.mux
wire [2:0] pyc_mux_55; // op=pyc.mux
wire [4:0] pyc_mux_56; // op=pyc.mux
wire [2:0] pyc_mux_57; // op=pyc.mux
wire [4:0] pyc_mux_58; // op=pyc.mux
wire [2:0] pyc_mux_59; // op=pyc.mux
wire [4:0] pyc_mux_60; // op=pyc.mux
wire pyc_not_69; // op=pyc.not
wire pyc_not_70; // op=pyc.not
wire pyc_not_72; // op=pyc.not
wire pyc_not_73; // op=pyc.not
wire [2:0] pyc_reg_24; // op=pyc.reg
wire [4:0] pyc_reg_26; // op=pyc.reg
wire [4:0] pyc_sub_28; // op=pyc.sub
wire [2:0] st__case03_fsm_traffic__L30; // pyc.name="st__case03_fsm_traffic__L30"
wire [2:0] state__case03_fsm_traffic__L27; // pyc.name="state__case03_fsm_traffic__L27"
wire [2:0] state_q; // pyc.name="state_q"
wire [2:0] state_q__next; // pyc.name="state_q__next"
wire timeout__case03_fsm_traffic__L32; // pyc.name="timeout__case03_fsm_traffic__L32"
wire [4:0] timer__case03_fsm_traffic__L28; // pyc.name="timer__case03_fsm_traffic__L28"
wire [4:0] timer_q; // pyc.name="timer_q"
wire [4:0] timer_q__next; // pyc.name="timer_q__next"
wire [4:0] tmr__case03_fsm_traffic__L31; // pyc.name="tmr__case03_fsm_traffic__L31"

// --- Combinational (netlist)
assign pyc_constant_1 = 1'd1;
assign pyc_constant_2 = 3'd0;
assign pyc_constant_3 = 5'd0;
assign pyc_constant_4 = 5'd1;
assign pyc_constant_5 = 3'd1;
assign pyc_constant_6 = 5'd2;
assign pyc_constant_7 = 3'd2;
assign pyc_constant_8 = 3'd3;
assign pyc_constant_9 = 5'd9;
assign pyc_constant_10 = 3'd4;
assign pyc_constant_11 = 3'd5;
assign emergency__case03_fsm_traffic__L25 = emergency;
assign pyc_comb_12 = pyc_constant_1;
assign pyc_comb_13 = pyc_constant_2;
assign pyc_comb_14 = pyc_constant_3;
assign pyc_comb_15 = pyc_constant_4;
assign pyc_comb_16 = pyc_constant_5;
assign pyc_comb_17 = pyc_constant_6;
assign pyc_comb_18 = pyc_constant_7;
assign pyc_comb_19 = pyc_constant_8;
assign pyc_comb_20 = pyc_constant_9;
assign pyc_comb_21 = pyc_constant_10;
assign pyc_comb_22 = pyc_constant_11;
assign pyc_comb_23 = emergency__case03_fsm_traffic__L25;
assign state_q = pyc_reg_24;
assign state__case03_fsm_traffic__L27 = state_q;
assign pyc_comb_25 = state__case03_fsm_traffic__L27;
assign timer_q = pyc_reg_26;
assign timer__case03_fsm_traffic__L28 = timer_q;
assign st__case03_fsm_traffic__L30 = pyc_comb_25;
assign tmr__case03_fsm_traffic__L31 = timer__case03_fsm_traffic__L28;
assign pyc_eq_27 = (tmr__case03_fsm_traffic__L31 == pyc_comb_14);
assign timeout__case03_fsm_traffic__L32 = pyc_eq_27;
assign nxt_st__case03_fsm_traffic__L34 = st__case03_fsm_traffic__L30;
assign pyc_sub_28 = (tmr__case03_fsm_traffic__L31 - pyc_comb_15);
assign pyc_mux_29 = (timeout__case03_fsm_traffic__L32 ? tmr__case03_fsm_traffic__L31 : pyc_sub_28);
assign nxt_tmr__case03_fsm_traffic__L35 = pyc_mux_29;
assign pyc_eq_30 = (st__case03_fsm_traffic__L30 == pyc_comb_13);
assign arith_select_31 = (timeout__case03_fsm_traffic__L32 ? pyc_comb_16 : nxt_st__case03_fsm_traffic__L34);
assign arith_select_32 = (timeout__case03_fsm_traffic__L32 ? pyc_comb_17 : nxt_tmr__case03_fsm_traffic__L35);
assign nxt_st__case03_fsm_traffic__L38 = arith_select_31;
assign nxt_tmr__case03_fsm_traffic__L38 = arith_select_32;
assign arith_select_33 = (pyc_comb_23 ? pyc_comb_16 : nxt_st__case03_fsm_traffic__L38);
assign arith_select_34 = (pyc_comb_23 ? pyc_comb_15 : nxt_tmr__case03_fsm_traffic__L38);
assign nxt_st__case03_fsm_traffic__L41 = arith_select_33;
assign nxt_tmr__case03_fsm_traffic__L41 = arith_select_34;
assign pyc_eq_35 = (st__case03_fsm_traffic__L30 == pyc_comb_16);
assign arith_select_36 = (timeout__case03_fsm_traffic__L32 ? pyc_comb_18 : nxt_st__case03_fsm_traffic__L34);
assign arith_select_37 = (timeout__case03_fsm_traffic__L32 ? pyc_comb_15 : nxt_tmr__case03_fsm_traffic__L35);
assign nxt_st__case03_fsm_traffic__L46 = arith_select_36;
assign nxt_tmr__case03_fsm_traffic__L46 = arith_select_37;
assign pyc_eq_38 = (st__case03_fsm_traffic__L30 == pyc_comb_18);
assign arith_select_39 = (timeout__case03_fsm_traffic__L32 ? pyc_comb_19 : nxt_st__case03_fsm_traffic__L34);
assign arith_select_40 = (timeout__case03_fsm_traffic__L32 ? pyc_comb_20 : nxt_tmr__case03_fsm_traffic__L35);
assign nxt_st__case03_fsm_traffic__L51 = arith_select_39;
assign nxt_tmr__case03_fsm_traffic__L51 = arith_select_40;
assign pyc_eq_41 = (st__case03_fsm_traffic__L30 == pyc_comb_19);
assign arith_select_42 = (timeout__case03_fsm_traffic__L32 ? pyc_comb_21 : nxt_st__case03_fsm_traffic__L34);
assign nxt_st__case03_fsm_traffic__L56 = arith_select_42;
assign nxt_tmr__case03_fsm_traffic__L56 = arith_select_32;
assign arith_select_43 = (pyc_comb_23 ? pyc_comb_21 : nxt_st__case03_fsm_traffic__L56);
assign arith_select_44 = (pyc_comb_23 ? pyc_comb_15 : nxt_tmr__case03_fsm_traffic__L56);
assign nxt_st__case03_fsm_traffic__L59 = arith_select_43;
assign nxt_tmr__case03_fsm_traffic__L59 = arith_select_44;
assign pyc_eq_45 = (st__case03_fsm_traffic__L30 == pyc_comb_21);
assign arith_select_46 = (timeout__case03_fsm_traffic__L32 ? pyc_comb_22 : nxt_st__case03_fsm_traffic__L34);
assign nxt_st__case03_fsm_traffic__L64 = arith_select_46;
assign nxt_tmr__case03_fsm_traffic__L64 = arith_select_37;
assign pyc_eq_47 = (st__case03_fsm_traffic__L30 == pyc_comb_22);
assign arith_select_48 = (timeout__case03_fsm_traffic__L32 ? pyc_comb_13 : nxt_st__case03_fsm_traffic__L34);
assign nxt_st__case03_fsm_traffic__L69 = arith_select_48;
assign nxt_tmr__case03_fsm_traffic__L69 = arith_select_40;
assign pyc_mux_49 = (pyc_eq_47 ? nxt_st__case03_fsm_traffic__L69 : nxt_st__case03_fsm_traffic__L34);
assign pyc_mux_50 = (pyc_eq_47 ? nxt_tmr__case03_fsm_traffic__L69 : nxt_tmr__case03_fsm_traffic__L35);
assign nxt_st__case03_fsm_traffic__L68 = pyc_mux_49;
assign nxt_tmr__case03_fsm_traffic__L68 = pyc_mux_50;
assign pyc_mux_51 = (pyc_eq_45 ? nxt_st__case03_fsm_traffic__L64 : nxt_st__case03_fsm_traffic__L68);
assign pyc_mux_52 = (pyc_eq_45 ? nxt_tmr__case03_fsm_traffic__L64 : nxt_tmr__case03_fsm_traffic__L68);
assign nxt_st__case03_fsm_traffic__L63 = pyc_mux_51;
assign nxt_tmr__case03_fsm_traffic__L63 = pyc_mux_52;
assign pyc_mux_53 = (pyc_eq_41 ? nxt_st__case03_fsm_traffic__L59 : nxt_st__case03_fsm_traffic__L63);
assign pyc_mux_54 = (pyc_eq_41 ? nxt_tmr__case03_fsm_traffic__L59 : nxt_tmr__case03_fsm_traffic__L63);
assign nxt_st__case03_fsm_traffic__L55 = pyc_mux_53;
assign nxt_tmr__case03_fsm_traffic__L55 = pyc_mux_54;
assign pyc_mux_55 = (pyc_eq_38 ? nxt_st__case03_fsm_traffic__L51 : nxt_st__case03_fsm_traffic__L55);
assign pyc_mux_56 = (pyc_eq_38 ? nxt_tmr__case03_fsm_traffic__L51 : nxt_tmr__case03_fsm_traffic__L55);
assign nxt_st__case03_fsm_traffic__L50 = pyc_mux_55;
assign nxt_tmr__case03_fsm_traffic__L50 = pyc_mux_56;
assign pyc_mux_57 = (pyc_eq_35 ? nxt_st__case03_fsm_traffic__L46 : nxt_st__case03_fsm_traffic__L50);
assign pyc_mux_58 = (pyc_eq_35 ? nxt_tmr__case03_fsm_traffic__L46 : nxt_tmr__case03_fsm_traffic__L50);
assign nxt_st__case03_fsm_traffic__L45 = pyc_mux_57;
assign nxt_tmr__case03_fsm_traffic__L45 = pyc_mux_58;
assign pyc_mux_59 = (pyc_eq_30 ? nxt_st__case03_fsm_traffic__L41 : nxt_st__case03_fsm_traffic__L45);
assign pyc_mux_60 = (pyc_eq_30 ? nxt_tmr__case03_fsm_traffic__L41 : nxt_tmr__case03_fsm_traffic__L45);
assign nxt_st__case03_fsm_traffic__L37 = pyc_mux_59;
assign nxt_tmr__case03_fsm_traffic__L37 = pyc_mux_60;
assign pyc_comb_61 = timer__case03_fsm_traffic__L28;
assign pyc_comb_62 = st__case03_fsm_traffic__L30;
assign pyc_comb_63 = pyc_eq_30;
assign pyc_comb_64 = nxt_st__case03_fsm_traffic__L37;
assign pyc_comb_65 = nxt_tmr__case03_fsm_traffic__L37;
assign ns_green__case03_fsm_traffic__L76 = pyc_comb_63;
assign pyc_eq_66 = (pyc_comb_62 == pyc_comb_16);
assign ns_yellow__case03_fsm_traffic__L77 = pyc_eq_66;
assign pyc_eq_67 = (pyc_comb_62 == pyc_comb_19);
assign ew_green__case03_fsm_traffic__L78 = pyc_eq_67;
assign pyc_eq_68 = (pyc_comb_62 == pyc_comb_21);
assign ew_yellow__case03_fsm_traffic__L79 = pyc_eq_68;
assign pyc_not_69 = (~ns_green__case03_fsm_traffic__L76);
assign pyc_not_70 = (~ns_yellow__case03_fsm_traffic__L77);
assign pyc_and_71 = (pyc_not_69 & pyc_not_70);
assign ns_r__case03_fsm_traffic__L81 = pyc_and_71;
assign pyc_not_72 = (~ew_green__case03_fsm_traffic__L78);
assign pyc_not_73 = (~ew_yellow__case03_fsm_traffic__L79);
assign pyc_and_74 = (pyc_not_72 & pyc_not_73);
assign ew_r__case03_fsm_traffic__L82 = pyc_and_74;
assign pyc_comb_75 = ns_green__case03_fsm_traffic__L76;
assign pyc_comb_76 = ns_yellow__case03_fsm_traffic__L77;
assign pyc_comb_77 = ew_green__case03_fsm_traffic__L78;
assign pyc_comb_78 = ew_yellow__case03_fsm_traffic__L79;
assign pyc_comb_79 = ns_r__case03_fsm_traffic__L81;
assign pyc_comb_80 = ew_r__case03_fsm_traffic__L82;
assign state_q__next = pyc_comb_64;
assign timer_q__next = pyc_comb_65;

// --- Sequential primitives
pyc_reg #(.WIDTH(3)) pyc_reg_24_inst (
  .clk(clk),
  .rst(rst),
  .en(pyc_comb_12),
  .d(state_q__next),
  .init(pyc_comb_13),
  .q(pyc_reg_24)
);
pyc_reg #(.WIDTH(5)) pyc_reg_26_inst (
  .clk(clk),
  .rst(rst),
  .en(pyc_comb_12),
  .d(timer_q__next),
  .init(pyc_comb_14),
  .q(pyc_reg_26)
);

assign ns_red = pyc_comb_79;
assign ns_yellow = pyc_comb_76;
assign ns_green = pyc_comb_75;
assign ew_red = pyc_comb_80;
assign ew_yellow = pyc_comb_78;
assign ew_green = pyc_comb_77;
assign timer_val = pyc_comb_61;

endmodule

